<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>新建随访组</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="/css/bootstrap-table.css">
    <script src="/js/jquery-3.4.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootstrap-table.js"></script>
    <script src="/js/bootstrap-table-zh-CN.js"></script>
    <link rel="stylesheet" href="/css/hospital.css">
</head>
<body>
<div th:replace="navigation :: nav"></div>
<div class="container-fluid main">
    <div class="row">
        <div class="col-xs-12 col-md-12">
            <div style="padding-top: 20px">
                <a href="javascript:history.back(-1)"><span class="glyphicon glyphicon-arrow-left"></span>返回随访组列表</a>
                <hr>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">责任医院</div>
                    <select class="form-control" id="hospital1" required>
                        <option value="">-请选择-</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="col-xs-3 col-lg-offset-1">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">责任科室</div>
                    <select class="form-control" id="department1" >
                        <option value="">-请选择-</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">负责人</div>
                    <input type="text" class="form-control" id="head" required="required">
                </div>
            </div>
        </div>
        <div class="col-xs-3 col-lg-offset-1">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">级别</div>
                    <select class="form-control" id="level1" >
                        <option value="">-请选择-</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-7 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">名称</div>
                    <input type="text" class="form-control" id="group_name" required="required">
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">联系电话</div>
                    <input type="text" class="form-control" id="phone" required="required">
                </div>
            </div>
        </div>
        <div class="col-xs-3 col-lg-offset-1">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">状态</div>
                    <select class="form-control" id="state">
                        <option value="">-请选择-</option>
                        <option value="1">-开放-</option>
                        <option value="0">-关闭-</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">开始日期</div>
                    <input type="date" class="form-control" id="start_time">
                </div>
            </div>
        </div>
        <div class="col-xs-3 col-lg-offset-1">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">结束日期</div>
                    <input type="date" class="form-control" id="end_time">
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-3 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">课题编号</div>
                    <input type="text" class="form-control" id="issue_number" required="required">
                </div>
            </div>
        </div>
        <div class="col-xs-3 col-lg-offset-1">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">患者数量</div>
                    <input type="number" class="form-control" id="number_patients">
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-7 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">类型</div>
                    <select class="form-control" id="control_group">
                        <option value="">请选择</option>
                        <option value="1">实验组</option>
                        <option value="0">对照组</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-7 col-lg-offset-2">
            <div class="form-group">
                <div class="input-group">
                    <div class="input-group-addon">背景</div>
                    <textarea type="text" class="form-control" id="background" required="required"></textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-7 col-lg-offset-5">
            <button class="btn btn-info" style="width: 100px" onclick="save()">保存</button>
        </div>
    </div>
</div>

</body>
<script>
    $(function(){
        selectHospital();
        selectLevel1();
        selectdepartment1();
    })
    //医院查询
    function selectHospital(){
        $.get("findAllHospital",{},function(rs){
            if (rs !=null){
                var hospital1=$("#hospital1");
                for(var i=0;i<rs.length;i++){
                    var varoption=$("<option value="+rs[i].dictionaryId  +">"+rs[i].dictionaryName+"</option>")
                    hospital1.append(varoption);
                }
            }
        })
    }
    //查询级别
    function selectLevel1(){
        $.get("findAllLeavl",{},function(rs){
            if(rs!=null){
                var leavel=$("#level1");
                for(var i=0;i<rs.length;i++){
                    var varoption=$("<option value="+rs[i].dictionaryId  +">"+rs[i].dictionaryName+"</option>")
                    leavel.append(varoption);
                }
            }
        })
    }
    //查询科室1
    function selectdepartment1(){
        $.get("findAllDepartment",{},function(rs){
            if(rs !=null){
                var departement=$("#department1");
                for(var i=0;i<rs.length;i++){
                    var varoption=$("<option value="+rs[i].dictionaryId+">"+rs[i].dictionaryName+"</option>");
                    departement.append(varoption);
                }
            }
        })
    }

    //单击保存添加
    function save(){
        var groupHospitalId=$("#hospital1").val();
        var groupDepartmentId=$("#department1").val();
        var groupPrincipal=$("#head").val();
        var groupRankId=$("#level1").val();
        var groupName=$("#group_name").val();
        var groupPhone=$("#phone").val();
        var groupState=$("#state").val();
        var groupStartTime=$("#start_time").val();
        var groupEndTime=$("#end_time").val();
        var groupNum=$("#issue_number").val();
        var patientNum=$("#number_patients").val();
        var controlGroup=$("#control_group").val();
        var background=$("#background").val();
        $.get("saveOne",{
            "groupHospitalId":groupHospitalId,
            "groupDepartmentId":groupDepartmentId,
            "groupPrincipal":groupPrincipal,
            "groupRankId":groupRankId,
            "groupName":groupName,
            "groupPhone":groupPhone,
            "groupState":groupState,
            "groupStartTime":groupStartTime,
            "groupEndTime":groupEndTime,
            "groupNum":groupNum,
            "patientNum":patientNum,
            "controlGroup":controlGroup,
            "background":background,
            "isDel":0
        },function(rs){
            if(rs=1){
                location.href="/login";
            }
        })
    }

</script>

</html>